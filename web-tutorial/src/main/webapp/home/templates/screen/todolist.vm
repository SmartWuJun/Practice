$rundata.setLayout("todolist.vm")
$page.setTitle("工作清单")
$page.addBodyAttribute("data-xns", "00032")
<div class="xn-todo-list" ng-controller="TodoListController">
    <div class="list-nav" role="navigation">
        <div class="list-inner">
            <div class="search-toolbar">
                <div class="search-input-wrapper">
                    <input class="search-input" type="text" ng-model="keyword" placeholder="搜索...">
                </div>
                <span class="search-icon-wrapper">
                    <a class="search-icon" role="button" tabindex="0" title="搜索" aria-label="搜索" ng-click="searchTask()">
                        <svg class="search rtl-flip" width="20px" height="20px" viewBox="0 0 20 20" version="1.1"
                             xmlns="http://www.w3.org/2000/svg">
                            <g stroke="none" stroke-width="1" fill-rule="evenodd">
                                <g>
                                    <path d="M8.5025,15 C4.9225,15 2.0025,12.08 2.0025,8.5 C2.0025,4.92 4.9225,2 8.5025,2 C12.0825,2 15.0025,4.92 15.0025,8.5 C15.0025,12.08 12.0825,15 8.5025,15 L8.5025,15 Z M8.5025,3 C5.4625,3 3.0025,5.46 3.0025,8.5 C3.0025,11.54 5.4625,14 8.5025,14 C11.5425,14 14.0025,11.54 14.0025,8.5 C14.0025,5.46 11.5425,3 8.5025,3 L8.5025,3 Z M17.5025,18 C17.3825,18 17.2425,17.96 17.1425,17.86 L13.6425,14.36 C13.4625,14.16 13.4625,13.84 13.6425,13.64 C13.8425,13.46 14.1625,13.46 14.3625,13.64 L17.8625,17.14 C18.0425,17.34 18.0425,17.66 17.8625,17.86 C17.7625,17.96 17.6225,18 17.5025,18 L17.5025,18 Z"
                                          id="z"></path>
                                </g>
                            </g>
                        </svg>
                    </a>
                </span>
            </div>
            <div class="user-toolbar">
                <div class="user-input-wrapper">
##                    <input class="user-input" type="text" ng-model="userId">
                    <div xn-lookup ng-model="ownerUser" data-method="getUser(data)" data-callback="selectUser(data)"
                         placeholder="请输入提示信息" data-search-val="name" >
                    </div>
                </div>
            </div>
            <div class="lists-scroll">
                <ul class="filters-collection">
                    <li role="menuitem" class="sidebarItem" ng-class="taskList.starred.isActive?'active':''" ng-click="selectTaskList(taskList.starred)">
                        <a>
                            <span class="list-icon" title="已加星标">
                                <svg class="starred" width="20px" height="20px" viewBox="0 0 20 20" version="1.1"
                                     xmlns="http://www.w3.org/2000/svg">
                                    <g id="Web-svgs" stroke="none" stroke-width="1" fill-rule="evenodd">
                                        <g id="starred">
                                            <g id="Rectangle-3-+-A" transform="translate(1.000000, 0.000000)">
                                                <path d="M3.74,18 C3.64,18 3.54,17.96 3.46,17.9 C3.28,17.76 3.2,17.54 3.28,17.34 L5.16,11.5 L0.2,7.9 C0.04,7.78 -0.04,7.56 0.02,7.34 C0.1,7.14 0.28,7 0.5,7 L6.64,7 L8.52,1.16 C8.66,0.76 9.34,0.76 9.48,1.16 L11.38,7 L17.5,7 C17.72,7 17.9,7.14 17.98,7.34 C18.04,7.56 17.96,7.78 17.8,7.9 L12.84,11.5 L14.72,17.34 C14.8,17.54 14.72,17.76 14.54,17.9 C14.38,18.02 14.14,18.02 13.96,17.9 L9,14.3 L4.04,17.9 C3.96,17.96 3.84,18 3.74,18 L3.74,18 Z M9,13.18 C9.1,13.18 9.2,13.2 9.3,13.28 L13.3,16.18 L11.78,11.46 C11.7,11.26 11.78,11.04 11.96,10.92 L15.96,8 L11,8 C10.8,8 10.6,7.86 10.54,7.66 L9,2.94 L7.46,7.66 C7.4,7.86 7.22,8 7,8 L2.04,8 L6.04,10.92 C6.22,11.04 6.3,11.26 6.22,11.46 L4.7,16.18 L8.7,13.28 C8.8,13.2 8.9,13.18 9,13.18 L9,13.18 Z"
                                                      id="C"></path>
                                                <path d="M3.74,18 C3.64,18 3.54,17.96 3.46,17.9 C3.28,17.76 3.2,17.54 3.28,17.34 L5.16,11.5 L0.2,7.9 C0.04,7.78 -0.04,7.56 0.02,7.34 C0.1,7.14 0.28,7 0.5,7 L6.64,7 L8.52,1.16 C8.66,0.76 9.34,0.76 9.48,1.16 L11.38,7 L17.5,7 C17.72,7 17.9,7.14 17.98,7.34 C18.04,7.56 17.96,7.78 17.8,7.9 L12.84,11.5 L14.72,17.34 C14.8,17.54 14.72,17.76 14.54,17.9 C14.38,18.02 14.14,18.02 13.96,17.9 L9,14.3 L4.04,17.9 C3.96,17.96 3.84,18 3.74,18 L3.74,18 Z"
                                                      id="D" opacity="0.06"></path>
                                            </g>
                                        </g>
                                    </g>
                                </svg>
                            </span>
                            <span class="title"><text>已加星标</text></span>
                            <span class="overdue-count" ng-if="taskList.starred.overdueCount > 0">{{taskList.starred.overdueCount}}</span>
                            <span class="count">{{taskList.starred.taskCount}}</span>
                        </a>
                    </li>
                    <li role="menuitem" class="sidebarItem" ng-class="taskList.today.isActive?'active':''" ng-click="selectTaskList(taskList.today)">
                        <a>
                            <span class="list-icon" title="今天">
                                <svg class="today" width="20px" height="20px" viewBox="0 0 20 20" version="1.1"
                                     xmlns="http://www.w3.org/2000/svg">
                                    <g stroke="none" stroke-width="1" fill-rule="evenodd">
                                        <g id="today">
                                            <path d="M2.5,7 C2.22,7 2,6.78 2,6.5 L2,3.5 C2,2.68 2.68,2 3.5,2 L16.5,2 C17.32,2 18,2.68 18,3.5 L18,6.5 C18,6.78 17.78,7 17.5,7 L2.5,7 Z M3,6 L17,6 L17,3.5 C17,3.22 16.78,3 16.5,3 L3.5,3 C3.22,3 3,3.22 3,3.5 L3,6 Z M3.5,18 C2.68,18 2,17.32 2,16.5 L2,8.5 C2,8.22 2.22,8 2.5,8 C2.78,8 3,8.22 3,8.5 L3,16.5 C3,16.78 3.22,17 3.5,17 L16.5,17 C16.78,17 17,16.78 17,16.5 L17,8.5 C17,8.22 17.22,8 17.5,8 C17.78,8 18,8.22 18,8.5 L18,16.5 C18,17.32 17.32,18 16.5,18 L3.5,18 Z"
                                                  id="E"></path>
                                        </g>
                                    </g>
                                </svg>
                            </span>
                            <span class="title"><text>今天</text></span>
                            <span class="overdue-count" ng-if="taskList.today.overdueCount > 0">{{taskList.today.overdueCount}}</span>
                            <span class="count">{{taskList.today.taskCount}}</span>
                        </a>
                    </li>
                    <li role="menuitem" class="sidebarItem" ng-class="taskList.week.isActive?'active':''" ng-click="selectTaskList(taskList.week)">
                        <a>
                            <span class="list-icon" title="周">
                                <svg class="week" width="20px" height="20px" viewBox="0 0 20 20" version="1.1"
                                     xmlns="http://www.w3.org/2000/svg">
                                    <g stroke="none" stroke-width="1" fill-rule="evenodd">
                                        <g id="week">
                                            <path d="M2.5,7 C2.22,7 2,6.78 2,6.5 L2,3.5 C2,2.68 2.68,2 3.5,2 L16.5,2 C17.32,2 18,2.68 18,3.5 L18,6.5 C18,6.78 17.78,7 17.5,7 L2.5,7 Z M3,6 L17,6 L17,3.5 C17,3.22 16.78,3 16.5,3 L3.5,3 C3.22,3 3,3.22 3,3.5 L3,6 Z M3.5,18 C2.68,18 2,17.32 2,16.5 L2,8.5 C2,8.22 2.22,8 2.5,8 C2.78,8 3,8.22 3,8.5 L3,16.5 C3,16.78 3.22,17 3.5,17 L16.5,17 C16.78,17 17,16.78 17,16.5 L17,8.5 C17,8.22 17.22,8 17.5,8 C17.78,8 18,8.22 18,8.5 L18,16.5 C18,17.32 17.32,18 16.5,18 L3.5,18 Z M5.5,15 C5.22,15 5,14.78 5,14.5 L5,9.5 C5,9.22 5.22,9 5.5,9 C5.78,9 6,9.22 6,9.5 L6,14.5 C6,14.78 5.78,15 5.5,15 L5.5,15 Z M8.5,15 C8.22,15 8,14.78 8,14.5 L8,9.5 C8,9.22 8.22,9 8.5,9 C8.78,9 9,9.22 9,9.5 L9,14.5 C9,14.78 8.78,15 8.5,15 L8.5,15 Z M11.5,15 C11.22,15 11,14.78 11,14.5 L11,9.5 C11,9.22 11.22,9 11.5,9 C11.78,9 12,9.22 12,9.5 L12,14.5 C12,14.78 11.78,15 11.5,15 L11.5,15 Z M14.5,15 C14.22,15 14,14.78 14,14.5 L14,9.5 C14,9.22 14.22,9 14.5,9 C14.78,9 15,9.22 15,9.5 L15,14.5 C15,14.78 14.78,15 14.5,15 L14.5,15 Z"
                                                  id="F"></path>
                                        </g>
                                    </g>
                                </svg>
                            </span>
                            <span class="title"><text>周</text></span>
                            <span class="overdue-count" ng-if="taskList.week.overdueCount > 0">{{taskList.week.overdueCount}}</span>
                            <span class="count">{{taskList.week.taskCount}}</span>
                        </a>
                    </li>
                </ul>
                <ul class="lists-collection">
                    <li role="menuitem" class="sidebarItem" ng-class="taskList.isActive?'active':''" ng-click="selectTaskList(taskList)" ng-repeat="taskList in taskList.list">
                        <a>
                            <span class="list-icon">
                                <svg class="list rtl-flip" width="20px" height="20px" viewBox="0 0 20 20" version="1.1"
                                     xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                    <g id="Web-svgs" stroke="none" stroke-width="1" fill-rule="evenodd">
                                        <g id="list">
                                            <path d="M3,7 C2.44,7 2,6.56 2,6 L2,5 C2,4.44 2.44,4 3,4 L4,4 C4.56,4 5,4.44 5,5 L5,6 C5,6.56 4.56,7 4,7 L3,7 Z M4,5 L3,5 L3,6 L4,6 L4,5 Z M7.5,6 C7.22,6 7,5.78 7,5.5 C7,5.22 7.22,5 7.5,5 L17.5,5 C17.78,5 18,5.22 18,5.5 C18,5.78 17.78,6 17.5,6 L7.5,6 Z M3,12 C2.44,12 2,11.56 2,11 L2,10 C2,9.44 2.44,9 3,9 L4,9 C4.56,9 5,9.44 5,10 L5,11 C5,11.56 4.56,12 4,12 L3,12 Z M4,10 L3,10 L3,11 L4,11 L4,10 Z M7.5,11 C7.22,11 7,10.78 7,10.5 C7,10.22 7.22,10 7.5,10 L17.5,10 C17.78,10 18,10.22 18,10.5 C18,10.78 17.78,11 17.5,11 L7.5,11 Z M3,17 C2.44,17 2,16.56 2,16 L2,15 C2,14.44 2.44,14 3,14 L4,14 C4.56,14 5,14.44 5,15 L5,16 C5,16.56 4.56,17 4,17 L3,17 Z M4,15 L3,15 L3,16 L4,16 L4,15 Z M7.5,16 C7.22,16 7,15.78 7,15.5 C7,15.22 7.22,15 7.5,15 L17.5,15 C17.78,15 18,15.22 18,15.5 C18,15.78 17.78,16 17.5,16 L7.5,16 Z"
                                                  id="K">
                                            </path>
                                        </g>
                                    </g>
                                </svg>
                            </span>
                            <span class="title" ng-if="taskList.objectType != 'MANUAL'" title="{{taskList.objectName}}-{{taskList.taskObjectCategory | taskCategory}}">{{taskList.objectName}}-{{taskList.taskObjectCategory | taskCategory}}</span>
                            <span class="title" ng-if="taskList.objectType == 'MANUAL'"  title="{{taskList.objectName}}">{{taskList.objectName}}</span>
                            <span class="overdue-count" ng-if="taskList.overdueCount > 0">{{taskList.overdueCount}}</span>
                            <span class="count">{{taskList.taskCount}}</span>
                            <span class="list-options" ng-if="taskList.objectType == 'MANUAL'" ng-click="editTaskList(taskList)">
                                <svg class="options rtl-flip" width="20px" height="20px" viewBox="0 0 20 20"
                                     version="1.1"
                                     xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                    <g stroke="none" stroke-width="1" fill-rule="evenodd">
                                        <g id="options">
                                            <path d="M17.1330617,2.8594383 C15.9930617,1.7194383 14.0130617,1.7194383 12.8930617,2.8594383 L5.5130617,10.2394383 C5.3330617,10.4394383 5.3330617,10.7594383 5.5130617,10.9594383 C5.7130617,11.1394383 6.0330617,11.1394383 6.2330617,10.9594383 L13.5930617,3.5594383 C14.3530617,2.7994383 15.6730617,2.7994383 16.4130617,3.5594383 C17.1730617,4.3194383 17.1930617,5.5594383 16.4130617,6.3394383 L9.0330617,13.7594383 C8.7130617,14.0794383 8.9330617,14.6194383 9.3730617,14.6194383 C9.5130617,14.6194383 9.6330617,14.5594383 9.7330617,14.4594383 L17.1330617,7.0394383 C18.2930617,5.8794383 18.2930617,4.0194383 17.1330617,2.8594383 L17.1330617,2.8594383 Z M8.4930617,15.3594383 C8.0330617,13.4594383 6.5130617,11.9394383 4.6130617,11.4794383 C4.3530617,11.4194383 4.0930617,11.5794383 4.0130617,11.8194383 L2.0330617,17.3194383 C1.8730617,17.7194383 2.2730617,18.1194383 2.6730617,17.9594383 C8.6730617,15.7794383 8.2530617,15.9594383 8.3730617,15.8194383 C8.4930617,15.6994383 8.5330617,15.5194383 8.4930617,15.3594383 L8.4930617,15.3594383 Z M3.3330617,16.6594383 L4.8130617,12.5794383 C6.0130617,12.9994383 6.9730617,13.9794383 7.3930617,15.1794383 L3.3330617,16.6594383 Z"
                                                  id="N">
                                            </path>
                                        </g>
                                    </g>
                                </svg>
                            </span>
                        </a>
                    </li>
                </ul>
                <ul class="new-list-dropzone"></ul>
            </div>
            <div class="sidebarActions">
                <a class="sidebarActions-addList" ng-click="createTaskList()">
                    <span class="sidebarActions-icon">
                        <svg class="plus-small" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve">
                            <g>
                                <path d="M10,10l0,6.5c-0.003,0.053 -0.008,0.103 -0.024,0.155c-0.038,0.116 -0.12,0.217 -0.226,0.278c-0.047,0.027 -0.094,0.042 -0.146,0.056c-0.052,0.008 -0.051,0.008 -0.104,0.011c-0.053,-0.003 -0.103,-0.008 -0.155,-0.024c-0.15,-0.05 -0.271,-0.171 -0.321,-0.321c-0.016,-0.052 -0.021,-0.102 -0.024,-0.155l0,-6.5l-6.5,0c-0.046,-0.002 -0.058,-0.001 -0.104,-0.011c-0.103,-0.022 -0.197,-0.076 -0.268,-0.154c-0.169,-0.188 -0.169,-0.482 0,-0.67c0.035,-0.038 0.077,-0.072 0.122,-0.098c0.078,-0.045 0.161,-0.062 0.25,-0.067l6.5,0l0,-6.5c0.005,-0.089 0.022,-0.172 0.067,-0.25c0.126,-0.219 0.406,-0.31 0.636,-0.207c0.048,0.022 0.093,0.05 0.132,0.085c0.078,0.071 0.132,0.165 0.154,0.268c0.01,0.046 0.009,0.058 0.011,0.104l0,6.5l6.5,0c0.046,0.002 0.058,0.001 0.104,0.011c0.103,0.022 0.197,0.076 0.268,0.154c0.169,0.188 0.169,0.482 0,0.67c-0.035,0.038 -0.077,0.072 -0.122,0.098c-0.078,0.045 -0.161,0.062 -0.25,0.067l-6.5,0Z"></path>
                            </g>
                        </svg>
                    </span>
                    <span class="sidebarActions-label"><text>创建清单</text></span>
                </a>
            </div>
        </div>
    </div>
    <div class="task" role="main">
        <div class="list-toolbar">
            <h1 class="title">{{task.title}}</h1>
        </div>
        <div class="task-scroll">
            <div class="add-task" ng-show="task.canAdd">
                <a class="plus-wrapper" ng-click="createTask()">
                    <svg class="plus-small" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve">
                        <g>
                            <path d="M10,10l0,6.5c-0.003,0.053 -0.008,0.103 -0.024,0.155c-0.038,0.116 -0.12,0.217 -0.226,0.278c-0.047,0.027 -0.094,0.042 -0.146,0.056c-0.052,0.008 -0.051,0.008 -0.104,0.011c-0.053,-0.003 -0.103,-0.008 -0.155,-0.024c-0.15,-0.05 -0.271,-0.171 -0.321,-0.321c-0.016,-0.052 -0.021,-0.102 -0.024,-0.155l0,-6.5l-6.5,0c-0.046,-0.002 -0.058,-0.001 -0.104,-0.011c-0.103,-0.022 -0.197,-0.076 -0.268,-0.154c-0.169,-0.188 -0.169,-0.482 0,-0.67c0.035,-0.038 0.077,-0.072 0.122,-0.098c0.078,-0.045 0.161,-0.062 0.25,-0.067l6.5,0l0,-6.5c0.005,-0.089 0.022,-0.172 0.067,-0.25c0.126,-0.219 0.406,-0.31 0.636,-0.207c0.048,0.022 0.093,0.05 0.132,0.085c0.078,0.071 0.132,0.165 0.154,0.268c0.01,0.046 0.009,0.058 0.011,0.104l0,6.5l6.5,0c0.046,0.002 0.058,0.001 0.104,0.011c0.103,0.022 0.197,0.076 0.268,0.154c0.169,0.188 0.169,0.482 0,0.67c-0.035,0.038 -0.077,0.072 -0.122,0.098c-0.078,0.045 -0.161,0.062 -0.25,0.067l-6.5,0Z"></path>
                        </g>
                    </svg>
                </a>
                <input type="text" class="addTask-input" maxlength="100" ng-model="task.objectName" placeholder="添加任务...">
            </div>
            <div class="task-list">
                <ul>
                    <li class="taskItem" ng-repeat="task in task.todoList" ng-click="selectTask(task)" ng-dblclick="openTask(task)">
                        <div class="taskItem-body" ng-class="task.isActive?'active':''">
                            <a class="taskItem-checkboxWrapper" ng-click="done(task, $index)">
                                <span>
                                    <svg class="task-check" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.41421;">
                                        <g>
                                            <path d="M17.5,4.5c0,-0.53 -0.211,-1.039 -0.586,-1.414c-0.375,-0.375 -0.884,-0.586 -1.414,-0.586c-2.871,0 -8.129,0 -11,0c-0.53,0 -1.039,0.211 -1.414,0.586c-0.375,0.375 -0.586,0.884 -0.586,1.414c0,2.871 0,8.129 0,11c0,0.53 0.211,1.039 0.586,1.414c0.375,0.375 0.884,0.586 1.414,0.586c2.871,0 8.129,0 11,0c0.53,0 1.039,-0.211 1.414,-0.586c0.375,-0.375 0.586,-0.884 0.586,-1.414c0,-2.871 0,-8.129 0,-11Z" style="fill:none;stroke-width:1px"></path>
                                        </g>
                                    </svg>
                                </span>
##                                <span>
##                                    <svg class="task-checked" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:1.41421;">
##                                        <g>
##                                            <path d="M9.5,14c-0.132,0 -0.259,-0.052 -0.354,-0.146c-1.485,-1.486 -3.134,-2.808 -4.904,-3.932c-0.232,-0.148 -0.302,-0.457 -0.153,-0.691c0.147,-0.231 0.456,-0.299 0.69,-0.153c1.652,1.049 3.202,2.266 4.618,3.621c2.964,-4.9 5.989,-8.792 9.749,-12.553c0.196,-0.195 0.512,-0.195 0.708,0c0.195,0.196 0.195,0.512 0,0.708c-3.838,3.837 -6.899,7.817 -9.924,12.902c-0.079,0.133 -0.215,0.221 -0.368,0.24c-0.021,0.003 -0.041,0.004 -0.062,0.004"></path>
##                                            <path d="M15.5,18l-11,0c-1.379,0 -2.5,-1.121 -2.5,-2.5l0,-11c0,-1.379 1.121,-2.5 2.5,-2.5l10,0c0.276,0 0.5,0.224 0.5,0.5c0,0.276 -0.224,0.5 -0.5,0.5l-10,0c-0.827,0 -1.5,0.673 -1.5,1.5l0,11c0,0.827 0.673,1.5 1.5,1.5l11,0c0.827,0 1.5,-0.673 1.5,-1.5l0,-9.5c0,-0.276 0.224,-0.5 0.5,-0.5c0.276,0 0.5,0.224 0.5,0.5l0,9.5c0,1.379 -1.121,2.5 -2.5,2.5"></path>
##                                        </g>
##                                    </svg>
##                                </span>
                            </a>

                            <div class="taskItem-titleWrapper">
                                <span class="taskItem-titleWrapper-title">{{task.objectName}}</span>
                            </div>
                            <span class="taskItem-duedate" ng-class="task.isOverdue?'overdue':''"><text>{{task.deadlineDate | deadlineDateFormat}}</text></span>
                            <a class="taskItem-star">
                                <span class="star-wrapper " ng-if="!task.isStar" ng-click="enableStar(task)" title="标记为星标">
                                    <svg width="18px" height="18px" viewBox="0 0 18 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve">
                                        <g>
                                            <path d="M3.74,18 C3.64,18 3.54,17.96 3.46,17.9 C3.28,17.76 3.2,17.54 3.28,17.34 L5.16,11.5 L0.2,7.9 C0.04,7.78 -0.04,7.56 0.02,7.34 C0.1,7.14 0.28,7 0.5,7 L6.64,7 L8.52,1.16 C8.66,0.76 9.34,0.76 9.48,1.16 L11.38,7 L17.5,7 C17.72,7 17.9,7.14 17.98,7.34 C18.04,7.56 17.96,7.78 17.8,7.9 L12.84,11.5 L14.72,17.34 C14.8,17.54 14.72,17.76 14.54,17.9 C14.38,18.02 14.14,18.02 13.96,17.9 L9,14.3 L4.04,17.9 C3.96,17.96 3.84,18 3.74,18 L3.74,18 Z M9,13.18 C9.1,13.18 9.2,13.2 9.3,13.28 L13.3,16.18 L11.78,11.46 C11.7,11.26 11.78,11.04 11.96,10.92 L15.96,8 L11,8 C10.8,8 10.6,7.86 10.54,7.66 L9,2.94 L7.46,7.66 C7.4,7.86 7.22,8 7,8 L2.04,8 L6.04,10.92 C6.22,11.04 6.3,11.26 6.22,11.46 L4.7,16.18 L8.7,13.28 C8.8,13.2 8.9,13.18 9,13.18 L9,13.18 Z"></path>
                                        </g>
                                    </svg>
                                </span>
                                <span class="starred-wrapper" ng-if="task.isStar" ng-click="disableStar(task, $index)" title="移除星标">
                                    <svg width="22px" height="44px" viewBox="0 0 22 44" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:1.41421;">
                                        <g>
                                            <path d="M0,0l0,40.5c0,0.28 0.22,0.42 0.48,0.32l10.04,-3.64c0.28,-0.1 0.7,-0.1 0.96,0l10.04,3.64c0.28,0.1 0.48,-0.04 0.48,-0.32l0,-40.5l-22,0ZM14.46,24.08l1.68,5.26c0.08,0.18 0,0.38 -0.16,0.5c-0.14,0.1 -0.36,0.1 -0.52,0l-4.46,-3.24l-4.46,3.24c-0.08,0.06 -0.18,0.1 -0.28,0.1c-0.08,0 -0.18,-0.04 -0.24,-0.1c-0.16,-0.12 -0.24,-0.32 -0.16,-0.5l1.68,-5.26l-4.46,-3.24c-0.14,-0.12 -0.22,-0.32 -0.16,-0.52c0.08,-0.18 0.24,-0.32 0.44,-0.32l5.52,0l1.68,-5.24c0.14,-0.36 0.74,-0.36 0.88,0l1.7,5.24l5.5,0c0.2,0 0.36,0.14 0.44,0.32c0.06,0.2 -0.02,0.4 -0.16,0.52l-4.46,3.24Z"></path>
                                        </g>
                                    </svg>
                                </span>
                            </a>
                        </div>
                    </li>
                </ul>
                <h2 class="heading" ng-show="task.canAdd && task.doneList.length > 0">
                    <a ng-click="showTodo=!showTodo">
                        <text>显示已完成任务</text>
                    </a>
                </h2>
                <ul ng-show="task.canAdd && showTodo">
                    <li class="taskItem done" ng-repeat="task in task.doneList" ng-click="selectTask(task)">
                        <div class="taskItem-body" ng-class="task.isActive?'active':''">
                            <a class="taskItem-checkboxWrapper" ng-click="todo(task, $index)">
                                <span title="标记为未完成">
                                    <svg class="task-checked" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:1.41421;">
                                        <g>
                                            <path d="M9.5,14c-0.132,0 -0.259,-0.052 -0.354,-0.146c-1.485,-1.486 -3.134,-2.808 -4.904,-3.932c-0.232,-0.148 -0.302,-0.457 -0.153,-0.691c0.147,-0.231 0.456,-0.299 0.69,-0.153c1.652,1.049 3.202,2.266 4.618,3.621c2.964,-4.9 5.989,-8.792 9.749,-12.553c0.196,-0.195 0.512,-0.195 0.708,0c0.195,0.196 0.195,0.512 0,0.708c-3.838,3.837 -6.899,7.817 -9.924,12.902c-0.079,0.133 -0.215,0.221 -0.368,0.24c-0.021,0.003 -0.041,0.004 -0.062,0.004"></path>
                                            <path d="M15.5,18l-11,0c-1.379,0 -2.5,-1.121 -2.5,-2.5l0,-11c0,-1.379 1.121,-2.5 2.5,-2.5l10,0c0.276,0 0.5,0.224 0.5,0.5c0,0.276 -0.224,0.5 -0.5,0.5l-10,0c-0.827,0 -1.5,0.673 -1.5,1.5l0,11c0,0.827 0.673,1.5 1.5,1.5l11,0c0.827,0 1.5,-0.673 1.5,-1.5l0,-9.5c0,-0.276 0.224,-0.5 0.5,-0.5c0.276,0 0.5,0.224 0.5,0.5l0,9.5c0,1.379 -1.121,2.5 -2.5,2.5"></path>
                                        </g>
                                    </svg>
                                </span>
                            </a>
                            <div class="taskItem-titleWrapper">
                                <span class="taskItem-titleWrapper-title">{{task.objectName}}</span>
                                <div class="taskItem-titleMeta-info">{{task.doTime | deadlineDateFormat}}
                                    <text>由 {{task.doUserName}}</text>
                                </div>
                            </div>
                            <a class="taskItem-star">
                                <span class="star-wrapper " ng-if="!task.isStar" ng-click="enableStar(task)" title="标记为星标">
                                    <svg width="18px" height="18px" viewBox="0 0 18 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve">
                                        <g>
                                            <path d="M3.74,18 C3.64,18 3.54,17.96 3.46,17.9 C3.28,17.76 3.2,17.54 3.28,17.34 L5.16,11.5 L0.2,7.9 C0.04,7.78 -0.04,7.56 0.02,7.34 C0.1,7.14 0.28,7 0.5,7 L6.64,7 L8.52,1.16 C8.66,0.76 9.34,0.76 9.48,1.16 L11.38,7 L17.5,7 C17.72,7 17.9,7.14 17.98,7.34 C18.04,7.56 17.96,7.78 17.8,7.9 L12.84,11.5 L14.72,17.34 C14.8,17.54 14.72,17.76 14.54,17.9 C14.38,18.02 14.14,18.02 13.96,17.9 L9,14.3 L4.04,17.9 C3.96,17.96 3.84,18 3.74,18 L3.74,18 Z M9,13.18 C9.1,13.18 9.2,13.2 9.3,13.28 L13.3,16.18 L11.78,11.46 C11.7,11.26 11.78,11.04 11.96,10.92 L15.96,8 L11,8 C10.8,8 10.6,7.86 10.54,7.66 L9,2.94 L7.46,7.66 C7.4,7.86 7.22,8 7,8 L2.04,8 L6.04,10.92 C6.22,11.04 6.3,11.26 6.22,11.46 L4.7,16.18 L8.7,13.28 C8.8,13.2 8.9,13.18 9,13.18 L9,13.18 Z"></path>
                                        </g>
                                    </svg>
                                </span>
                                <span class="starred-wrapper" ng-if="task.isStar" ng-click="disableStar(task)" title="移除星标">
                                    <svg width="22px" height="44px" viewBox="0 0 22 44" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:1.41421;">
                                        <g>
                                            <path d="M0,0l0,40.5c0,0.28 0.22,0.42 0.48,0.32l10.04,-3.64c0.28,-0.1 0.7,-0.1 0.96,0l10.04,3.64c0.28,0.1 0.48,-0.04 0.48,-0.32l0,-40.5l-22,0ZM14.46,24.08l1.68,5.26c0.08,0.18 0,0.38 -0.16,0.5c-0.14,0.1 -0.36,0.1 -0.52,0l-4.46,-3.24l-4.46,3.24c-0.08,0.06 -0.18,0.1 -0.28,0.1c-0.08,0 -0.18,-0.04 -0.24,-0.1c-0.16,-0.12 -0.24,-0.32 -0.16,-0.5l1.68,-5.26l-4.46,-3.24c-0.14,-0.12 -0.22,-0.32 -0.16,-0.52c0.08,-0.18 0.24,-0.32 0.44,-0.32l5.52,0l1.68,-5.24c0.14,-0.36 0.74,-0.36 0.88,0l1.7,5.24l5.5,0c0.2,0 0.36,0.14 0.44,0.32c0.06,0.2 -0.02,0.4 -0.16,0.52l-4.46,3.24Z"></path>
                                        </g>
                                    </svg>
                                </span>
                            </a>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="{{left_view_edit_move}}">
        <div class="left_create_view_edit">
            <form class="form-horizontal xn-form" role="form" xn-form-validate novalidate name="validateFormTaskEdit">
                <div class="xn-center title">{{task.taskName}}</div>
                <div class="clearfix main-area">
                    <div class="xn-input-line  clearfix">
                        <label class="xn-label" for="objectName"><span class="f-right">名称：</span><i class="xn-required-i f-right"></i></label>
                        <div class="xn-input-sm">
                            <input class="form-control" type="text" id="objectName" maxlength="50" required="required" ng-model="task.item.objectName">
                        </div>
                    </div>
                    <div class="xn-input-line clearfix">
                        <label class="xn-label" for="isStar"><span class="f-right">星标：</span></label>
                        <label class="xn-input-sm xn-checkbox-label">
                            <input  class="none" type="checkbox" id="isStar" ng-model="task.item.isStar">
                            <i class="xn-checkbox" ></i>
                            <i class="icon icon-right_3" ng-if="task.item.isStar"></i>
                        </label>
                    </div>
                    <div class="xn-input-line clearfix">
                        <label for="deadlineDate" class="xn-label"><span class="f-right">截止日：</span></label>
                        <div class="xn-input-sm ">
                            <div class="input-group openData">
                                <input type="text" class="form-control" id="deadlineDate" placeholder=""
                                       ng-model="task.item.deadlineDate" name="deadlineDate"
                                       datepicker-popup="yyyy-MM-dd" is-open="isOpenDeadlineDate" min-date="minDate"
                                       datepicker-options="dateOptions"
                                       date-disabled="disabled(date, mode)" close-text="关闭" current-text="今天"
                                       clear-text="清除">
                                <span class="input-group-btn">
                                    <button class="btn btn-default" type="button" ng-click="openDeadlineDate($event)">
                                        <i class="glyphicon glyphicon-calendar"></i>
                                    </button>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="xn-input-line clearfix">
                        <label for="remndingTime" class="xn-label"><span class="f-right">提醒日：</span></label>
                        <div class="xn-input-sm ">
                            <div class="input-group openData">
                                <input type="text" class="form-control" id="remndingTime" placeholder=""
                                       ng-model="task.item.remndingTime" name="remndingTime"
                                       datepicker-popup="yyyy-MM-dd" is-open="isOpenRemndingTime" min-date="minDate"
                                       datepicker-options="dateOptions"
                                       date-disabled="disabled(date, mode)" close-text="关闭" current-text="今天"
                                       clear-text="清除">
                                <span class="input-group-btn">
                                    <button class="btn btn-default" type="button" ng-click="openRemndingTime($event)">
                                        <i class="glyphicon glyphicon-calendar"></i>
                                    </button>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="xn-input-line  clearfix">
                        <label class="xn-label" for="objectDescription"><span class="f-right">描述：</span></label>
                        <div class="xn-input-sm">
                            <textarea class="form-control" id="objectDescription" name="objectDescription" ng-model="task.item.objectDescription"></textarea>
                        </div>
                    </div>
                    <div class="xn-input-line  clearfix">
                        <div class="xn-table-wrap ">
                            <table class="table table-bordered table-striped ">
##                                <thead>
##                                <tr>
##                                    <th class="xn-col-sm-3">
##                                    </th>
##                                    <th class="xn-col-sm-45">阶段名称</th>
##                                </tr>
##                                </thead>

                                <tbody id="tbody">
                                <tr ng-repeat="subtask in task.subtaskList">
                                    <td class="xn-col-sm-3">
                                        <a class="subtask-add" ng-show="$last" ng-click="addSubTask()">
                                            <svg class="plus-small" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve">
                                                <g>
                                                    <path d="M10,10l0,6.5c-0.003,0.053 -0.008,0.103 -0.024,0.155c-0.038,0.116 -0.12,0.217 -0.226,0.278c-0.047,0.027 -0.094,0.042 -0.146,0.056c-0.052,0.008 -0.051,0.008 -0.104,0.011c-0.053,-0.003 -0.103,-0.008 -0.155,-0.024c-0.15,-0.05 -0.271,-0.171 -0.321,-0.321c-0.016,-0.052 -0.021,-0.102 -0.024,-0.155l0,-6.5l-6.5,0c-0.046,-0.002 -0.058,-0.001 -0.104,-0.011c-0.103,-0.022 -0.197,-0.076 -0.268,-0.154c-0.169,-0.188 -0.169,-0.482 0,-0.67c0.035,-0.038 0.077,-0.072 0.122,-0.098c0.078,-0.045 0.161,-0.062 0.25,-0.067l6.5,0l0,-6.5c0.005,-0.089 0.022,-0.172 0.067,-0.25c0.126,-0.219 0.406,-0.31 0.636,-0.207c0.048,0.022 0.093,0.05 0.132,0.085c0.078,0.071 0.132,0.165 0.154,0.268c0.01,0.046 0.009,0.058 0.011,0.104l0,6.5l6.5,0c0.046,0.002 0.058,0.001 0.104,0.011c0.103,0.022 0.197,0.076 0.268,0.154c0.169,0.188 0.169,0.482 0,0.67c-0.035,0.038 -0.077,0.072 -0.122,0.098c-0.078,0.045 -0.161,0.062 -0.25,0.067l-6.5,0Z"></path>
                                                </g>
                                            </svg>
                                        </a>
                                        <label class="xn-checkbox-label" ng-show="!$last">
                                            <input  class="none" type="checkbox" ng-model="subtask.isDone">
                                            <i class="xn-checkbox" ></i>
                                            <i class="icon icon-right_3" ng-if="subtask.isDone"></i>
                                        </label>
                                    </td>
                                    <td class="subtask-wrapper" ng-class="subtask.isDone?'done':''">
                                        <input type="text" class="addSubTask-input" maxlength="100" ng-model="subtask.name" placeholder="添加子任务...">
                                        <a class="subtask-delete" ng-click="removeSubTask($index)">
                                            <svg class="delete" width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                                <g stroke="none" stroke-width="1" fill-rule="evenodd">
                                                    <g id="delete">
                                                        <path d="M10.72,9.9975 L13.86,6.8575 C14.04,6.6575 14.04,6.3375 13.86,6.1375 C13.66,5.9575 13.34,5.9575 13.14,6.1375 L10,9.2775 L6.86,6.1375 C6.66,5.9575 6.34,5.9575 6.14,6.1375 C5.96,6.3375 5.96,6.6575 6.14,6.8575 L9.28,9.9975 L6.14,13.1375 C5.96,13.3375 5.96,13.6575 6.14,13.8575 C6.24,13.9575 6.38,13.9975 6.5,13.9975 C6.62,13.9975 6.76,13.9575 6.86,13.8575 L10,10.7175 L13.14,13.8575 C13.24,13.9575 13.38,13.9975 13.5,13.9975 C13.62,13.9975 13.76,13.9575 13.86,13.8575 C14.04,13.6575 14.04,13.3375 13.86,13.1375 L10.72,9.9975 Z" id="4"></path>
                                                    </g>
                                                </g>
                                            </svg>
                                        </a>
                                    </td>
##                                    <td  xn-click-edit class="xn-col-sm-45 xn-click-edit">
##                                        <div class="xn-data">{{subtask.name}}</div>
##                                        <input class="xn-click-input form-control" ng-model="subtask.name" name="subtaskName" placeholder="添加子任务"></input>
##                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>

                    <div class="xn-input-line  clearfix">
                        <div xn-attachment-edit ng-model="attachment"></div>
                    </div>

                    <div class="xn-input-line btn-area clearfix">
                        <a class="btn btn-danger f-left" ng-click="deleteTask(task.item)">删除</a>
                        <a class="btn btn-primary" xn-form-submit="editTask(task.item)">保存</a>
                        <a class="btn btn-default" ng-click="colseTask()">取消</a>
                    </div>
                    <div class="xn-input-line clearfix" ng-show="validateFormTaskEdit.$errors.length >0">
                        <div class="col-sm-12">
                            <div class="alert alert-danger">
                                <i class="glyphicon glyphicon-remove-sign mr_5" ng-click="closeAlert(0,validateFormTaskEdit.$errors)"></i>
                                {{validateFormTaskEdit.$errors[0]}}
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<script type="text/ng-template" id="createTaskList.html">
    <form  class="form-horizontal xn-form clearfix" role="form" xn-form-validate=""  novalidate  name="validateForm" >
        <div class="modal-header">
            <h3 class="modal-title">创建新清单</h3>
            <div class="xn-close xn-cursor" ng-click="clean()">
                <i class="icon icon-delete"></i>
            </div>
        </div>
        <div class="modal-body clearfix">
            <div class="form-group col-sm-92 col-sm-offset-1 clearfix">
                <label class="col-sm-4"><span class="f-right pt_5 cw-member-detail-title">名称：</span><i class="xn-required-i f-right"></i></label>
                <div class="xn-input-sm">
                    <input type="text" class="form-control" maxlength="50" required="required" ng-model="sc.objectName">
                </div>
            </div>
            <div class="form-group col-sm-92 col-sm-offset-1 clearfix">
                <label class="col-sm-4"><span class="f-right pt_5 cw-member-detail-title">描述：</span></label>
                <div class="xn-input-sm">
                    <textarea type="text" ng-model="sc.objectDescription" class="form-control" maxlength="500"/>
                </div>
            </div>
            <div class="form-group" ng-show="validateForm.$errors.length > 0 ">
                <div class="col-sm-10">
                    <div class="alert alert-danger col-sm-offset-4 ng-binding"><i class="glyphicon glyphicon-remove-sign mr_5" ng-click="closeAlert(0,validateForm.$errors)"></i>{{validateForm.$errors[0]}}</div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-primary " xn-form-submit="doSave()">保存</button>
            <a ng-click="clean()"  class="btn btn-default ">取消</a>
        </div>
    </form>
</script>

<script type="text/ng-template" id="editTaskList.html">
    <form  class="form-horizontal xn-form clearfix" role="form" xn-form-validate=""  novalidate  name="validateForm" >
        <div class="modal-header">
            <h3 class="modal-title">编辑清单</h3>
            <div class="xn-close xn-cursor" ng-click="clean()">
                <i class="icon icon-delete"></i>
            </div>
        </div>
        <div class="modal-body clearfix">
            <div class="form-group col-sm-92 col-sm-offset-1 clearfix">
                <label class="col-sm-4"><span class="f-right pt_5 cw-member-detail-title">名称：</span><i class="xn-required-i f-right"></i></label>
                <div class="xn-input-sm">
                    <input type="text" class="form-control" maxlength="50" required="required" ng-model="sc.objectName">
                </div>
            </div>
            <div class="form-group col-sm-92 col-sm-offset-1 clearfix">
                <label class="col-sm-4"><span class="f-right pt_5 cw-member-detail-title">描述：</span></label>
                <div class="xn-input-sm">
                    <textarea type="text" ng-model="sc.objectDescription" class="form-control" maxlength="500"/>
                </div>
            </div>
            <div class="form-group" ng-show="validateForm.$errors.length > 0 ">
                <div class="col-sm-10">
                    <div class="alert alert-danger col-sm-offset-4 ng-binding"><i class="glyphicon glyphicon-remove-sign mr_5" ng-click="closeAlert(0,validateForm.$errors)"></i>{{validateForm.$errors[0]}}</div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-danger f-left" xn-form-submit="doDelete()">删除</button>
            <button class="btn btn-primary " xn-form-submit="doSave()">保存</button>
            <a ng-click="clean()"  class="btn btn-default ">取消</a>
        </div>
    </form>
</script>


<script type="text/javascript" src="$homeContent.getURI('dist/scripts/todolist.js')"></script>