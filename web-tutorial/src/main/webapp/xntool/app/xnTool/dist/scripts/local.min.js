!function(){"use strict";var e=["ui.router","xn.common","xn.service.interceptor","xn.talk.filter","xn.talk.service","xn.talk.method","ui.bootstrap","xn.directive.form","xn.directive.calendar","xn.directive.location"],t=angular.module("myApp",e);t.value("xnConfig",{isDev:require("electron").remote.getGlobal("isDev"),platform:require("electron").remote.getGlobal("platform"),appInfo:require("electron").remote.getGlobal("appInfo")}),t.config(["$httpProvider",function(e){e.interceptors.push("httpInterceptor")}]),t.config(["xnValidatorProvider",function(e){e.config({blurTrig:!1,showError:!1,removeError:!1}),e.setRules({})}])}(),function(){angular.module("myApp").config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("/chat"),e.state("chat",{url:"/chat",templateUrl:"template/chat.html",controller:"ChatController"}).state("index",{url:"/index",templateUrl:"template/main.html",controller:"IndexController"}).state("application",{url:"/application",templateUrl:"template/application.html",controller:"ApplicationController"}).state("pan",{url:"/pan",templateUrl:"template/pan.html",controller:"PanController"})}])}(),function(){"use strict";angular.module("xn.talk.filter",[])}(),function(){"use strict";angular.module("xn.talk.method",[]).service("xnAppTool",function(){this.setCookie=function(e,t,n){var o=1,r=new Date,n=n||"/";r.setTime(r.getTime()+24*o*60*60*1e3),document.cookie=e+"="+escape(t)+";expires="+r.toGMTString()+";path="+n+";"},this.readCookie=function(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(n))?unescape(t[2]):null},this.delCookie=function(e,t){var t=t||"/",n=readCookie(e);null!=n&&(document.cookie=e+"="+n+";expires="+new Date(0).toGMTString()+";path="+t+";")},this.clearCookie=function(e){var e=e||"/",t=document.cookie.match(/[^ =;]+(?=\=)/g);if(t)for(var n=t.length;n--;)document.cookie=t[n]+"=0;expires="+new Date(0).toUTCString()+";path="+e+";"}})}(),function(){"use strict";var e=function(e,t,n){function o(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(n))?unescape(t[2]):null}var t=t,n=n,r="",a=new Object,i=o("xn_session")||0;void 0!=i&&null!=i&&i>0&&(a.session=i),a.format="json",a.sign_method="md5",a.timestamp=Date.parse(new Date),a.app_key=t,a.v="1.0";for(var l in e)null!=e[l]&&void 0!=e[l]&&"function"!=typeof e[l]&&(a[l]=e[l]);var u,c,s=[];for(var l in a)"function"!=typeof a[l]&&s.push(l);s.sort();for(var c=n,d=0;d<s.length;d++)c=angular.isArray(a[s[d]])?c+s[d]+JSON.stringify(a[s[d]]):c+s[d]+a[s[d]];c+=n,u=MD5(c).toUpperCase(),r="sign="+u.toUpperCase();for(var d=0;d<s.length;d++)r=angular.isArray(a[s[d]])?r+"&"+s[d]+"="+encodeURI(JSON.stringify(a[s[d]])):r+"&"+s[d]+"="+encodeURI(a[s[d]]);var p;p=1!=require("electron").remote.getGlobal("isDev")?"https://xntalk-api.xiniunet.com/router?":"https://xntalk-api-dev.xiniunet.com/router?";var m={};return m.url=p,m.data=r,m};angular.module("xn.talk.service",[]).config(["$httpProvider",function(e){e.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",e.defaults.withCredentials=!0,e.defaults.useXDomain=!0}]).factory("talkService",["$http",function(t){var n=require("electron").remote.getGlobal("serveUrl"),o=require("electron").remote.getGlobal("app_key"),r=require("electron").remote.getGlobal("secret"),a={};return a.login=function(a){a.method="xntalk.login";var i=e(a,o,r);return t({method:"POST",url:n,data:i.data})},a.xnTalkUnionGet=function(a){a.method="xntalk.union.get";var i=e(a,o,r);return t({method:"POST",url:n,data:i.data})},a.xnTalkScanLoginCreate=function(a){a.method="xntalk.scanLogin.create";var i=e(a,o,r);return t({method:"POST",url:n,data:i.data})},a.xnTalkScanLoginGetCreate=function(a){a.method="xntalk.scanLogin.get";var i=e(a,o,r);return t({method:"POST",url:n,data:i.data})},a.xnTalkScanLoginGetCreate=function(a){a.method="xntalk.unionByAccount.get";var i=e(a,o,r);return t({method:"POST",url:n,data:i.data})},a.xnTalkGlobalSearch=function(a){a.method="xntalk.global.search";var i=e(a,o,r);return t({method:"POST",url:n,data:i.data})},a.xnTalkPassportIdByUnionIdAndTenantIdGet=function(a){a.method="xntalk.passportIdByUnionIdAndTenantId.get";var i=e(a,o,r);return t({method:"POST",url:n,data:i.data})},a.xnTalkAllTenantListGet=function(a){a.method="xntalk.allTenantList.get";var i=e(a,o,r);return t({method:"POST",url:n,data:i.data})},a}])}(),function(){"use strict";var e=function(e){e.name="这是个应用"};angular.module("myApp").controller("ApplicationController",["$scope",e])}(),function(){"use strict";var e=function(e,t){e.vm={keyword:"",menuActive:"conversations",conversations:1},e.doSearch=function(){},e.tabChatMenu=function(t){e.vm.menuActive=t}};angular.module("myApp").controller("ChatController",["$scope","talkService",e])}(),function(){"use strict";var e=function(e){};angular.module("myApp").controller("IndexController",["$scope",e])}(),function(){"use strict";angular.module("myApp").controller("BodyController",["$scope","xnConfig","talkService","xnAppTool","dialogService",function(e,t,n,o,r){e.global={nav:1,platform:t.platform,tenant:{},showInfo:!1,appInfo:t.appInfo},e.tabNav=function(t){e.global.nav=t},e.tenantList=[],this.getAvatar=function(e){var t=/^((http|https|ftp):\/\/)?(\w(\:\w)?@)?([0-9a-z_-]+\.)*?([a-z0-9-]+\.[a-z]{2,6}(\.[a-z]{2})?(\:[0-9]{2,6})?)((\/[^?#<>\/\\*":]*)+(\?[^#]*)?(#.*)?)?$/i;return t.test(url)?url+"?imageView&thumbnail=80x80&quality=85":"images/default-icon.png"},e.xnTalkClose=function(){const e=require("electron").remote.dialog;var t={type:"question",title:"退出",buttons:["确定","取消"],defaultId:0,message:"确定要退出XNTALK吗？",detail:"",cancelId:1};e.showMessageBox(t,function(e){if(0==e){try{o.clearCookie()}catch(e){}require("electron").remote.app.quit()}})},e.xnTalkMaximize=function(){require("electron").remote.getCurrentWindow().isMaximized()?require("electron").remote.getCurrentWindow().restore():require("electron").remote.getCurrentWindow().maximize()},e.xnTalkMinimizable=function(){require("electron").remote.BrowserWindow.getFocusedWindow().minimize()},e.showInfo=function(t){e.global.showInfo=t}}])}(),function(){"use strict";var e=function(e){};angular.module("myApp").controller("PanController",["$scope",e])}();